$(document).ready(function(){}),angular.module("index",[]).controller("SongShareCtrl",["$scope",function(o){o.username="cat",o.password="Batter1es!",o.confirmPassword="",o.token=null,o.urlToAdd="",o.desiredRoom="",o.room="",o.list={},o.isPlaying=!1,o.nowPlaying=-1,o.time=0,o.addPermission=!1;var n=function(o){console.log(o)},t=o.actions={},e=io.connect("https://localhost:3000/user"),i=io.connect("https://localhost:3000/playlist"),l=function(){console.log("pause")},s=function(){console.log("play")},a=function(o){console.log("load:",o)},r=function(){return o.time};i.on("join-response",function(t){t.success?o.room=t.room:(console.log(t),n("Message:"),n(t.message))}),i.on("playlist-error",function(o){console.log(o)}),i.on("playlist-state",function(n){console.log("State:"),console.log(n),n.nowPlaying&&(n.list?n.list[n].url!==o.list[o.nowPlaying].url&&a(n.list[n].url):n.nowPlaying!==o.nowPlaying&&a(o.list[n.nowPlaying].url),o.nowPlaying=n.nowPlaying),n.list&&(void 0===n.nowPlaying&&n.list[o.nowPlaying].url!==o.list[o.nowPlaying].url&&a(o.list[o.nowPlaying].url),o.list=list),"boolean"==typeof playlist.isPlaying&&(playlist.isPlaying&&!o.isPlaying?s():!n.isPlaying&&o.isPlaying&&l()),o.addPermission=n.addPermission,o.$apply()}),e.on("authenticate-result",function(n){console.log(n),n.token&&(console.log("token recieved"),o.token=n.token,o.$apply()),n.message&&console.log(message)}),t.join=function(n){var t={token:o.token,room:n};i.emit("join",t)},t.add=function(n){var t={token:o.token,url:n};i.emit("add",t)},t.playPause=function(n){var t={token:o.token,isPlaying:n,time:r()};i.emit("play-pause",t)},t.transport=function(n){var t={token:o.token,time:n};i.emit("transport",t)},t.move=function(n,t){var e={token:o.token,fromTo:{from:n,to:t}};i.emit("move",e)},t.change=function(n){var t={token:o.token,songIndex:n};i.emit("change",t)},t.login=function(n,t){var i={token:o.token,username:n,password:t};e.emit("authenticate",i)}}]);