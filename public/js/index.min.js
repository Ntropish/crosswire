$(document).ready(function(){}),angular.module("index",[]).controller("SongShareCtrl",["$scope",function(n){n.token=null,n.list={},n.isPlaying=!1,n.nowPlaying=-1,n.time=0,n.addPermission=!1;var o=n.actions={},i=(io.connect("https://localhost:3000/user"),io.connect("https://localhost:3000/playlist")),l=function(){console.log("pause")},t=function(){console.log("play")},a=function(n){console.log("load:",n)};i.on("playlist-state",function(o){o.nowPlaying&&(o.list?o.list[o].url!==n.list[n.nowPlaying].url&&a(o.list[o].url):o.nowPlaying!==n.nowPlaying&&a(n.list[o.nowPlaying].url),n.nowPlaying=o.nowPlaying),o.list&&(void 0===o.nowPlaying&&o.list[n.nowPlaying].url!==n.list[n.nowPlaying].url&&a(n.list[n.nowPlaying].url),n.list=list),"boolean"==typeof playlist.isPlaying&&(playlist.isPlaying&&!n.isPlaying?t():!o.isPlaying&&n.isPlaying&&l()),n.addPermission=o.addPermission}),o.join=function(o){var l={token:n.token,room:o};i.emit("join",l)},o.add=function(o){var l={token:n.token,url:o};i.emit("add",l)},o.playPause=function(o){var l={token:n.token,isPlaying:o};i.emit("play-pause",l)},o.transport=function(o){var l={token:n.token,time:o};i.emit("transport",l)},o.move=function(o,l){var t={token:n.token,fromTo:{from:o,to:l}};i.emit("move",t)},o.change=function(o){var l={token:n.token,songIndex:o};i.emit("change",l)}}]);